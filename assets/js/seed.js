function setup(){createCanvas(960,720),colorMode(HSB,360,100,100,1)}function draw(){translate(width/2,height/2),scale(zoom),background(1),fill(22,75,12),noStroke(),rect(-480,0,960,360),seed&&(zoom=.99*zoom+.01*zoomTarget,y<0?ySpeed+=.03:(seed.branch2(HALF_PI),seed.grow(0,y),seed.update(),ySpeed*=.5),y+=ySpeed,noFill(),stroke(120,75,60),strokeWeight(seed.size),strokeCap(PROJECT),seed.draw(0,y),console.log(seed.count()))}function keyPressed(){seed?"q"==key||"Q"==key?upLeft=!0:"w"==key||"W"==key?upBranch=!0:"e"==key||"E"==key?upRight=!0:"a"==key||"A"==key?downLeft=!0:"s"==key||"S"==key?downBranch=!0:"d"!=key&&"D"!=key||(downRight=!0):keyCode!=ENTER&&keyCode!=RETURN||(seed=new Tree,seed.size=9,zoomTarget=2,y=-height/2-seed.size,ySpeed=0)}function keyReleased(){seed&&("q"==key||"Q"==key?upLeft=!1:"w"==key||"W"==key?upBranch=!1:"e"==key||"E"==key?upRight=!1:"a"==key||"A"==key?downLeft=!1:"s"==key||"S"==key?downBranch=!1:"d"!=key&&"D"!=key||(downRight=!1))}function Tree(){this.parent,this.left,this.right,this.offsetX=0,this.offsetY=0,this.direction=0,this.length=0,this.size=1,this.count=function(){var a=1;return this.left&&(a+=this.left.count()),this.right&&(a+=this.right.count()),a},this.grow=function(a,b){this.left||this.right?(this.left&&this.left.grow(a+this.offsetX,b+this.offsetY),this.right&&this.right.grow(a+this.offsetX,b+this.offsetY)):this.length<16?(this.length+=.25,b<0?(upLeft&&(this.direction-=.01),upRight&&(this.direction+=.01),upBranch&&this.parent&&this.parent.parent&&(this==this.parent.left&&this.parent.right?this.direction-=.01:this==this.parent.right&&this.parent.left&&(this.direction+=.01))):(downLeft&&(this.direction+=.01),downRight&&(this.direction-=.01),downBranch&&this.parent&&this.parent.parent&&(this==this.parent.left&&this.parent.right?this.direction+=.01:this==this.parent.right&&this.parent.left&&(this.direction-=.01)))):this.size>1&&(b<0&&upBranch||b>=0&&downBranch?this.branch2(0):this.branch())},this.branch=function(){this.left||(this.left=new Tree,this.left.direction=this.direction,this.left.size=this.size-1,this.left.parent=this)},this.branch2=function(a){this.left||this.right||(this.left=new Tree,this.left.direction=this.direction-a,this.left.size=this.size-1,this.left.parent=this,this.right=new Tree,this.right.direction=this.direction+a,this.right.size=this.size-1,this.right.parent=this)},this.update=function(){this.offsetX=cos(this.direction)*this.length,this.offsetY=sin(this.direction)*this.length,this.left&&this.left.update(),this.right&&this.right.update()},this.draw=function(a,b){var c=a+this.offsetX,d=b+this.offsetY;strokeWeight(this.size),line(a,b,c,d),this.left&&this.left.draw(c,d),this.right&&this.right.draw(c,d)}}var zoom=1,zoomTarget=0,time=0,upLeft=!1,upBranch=!1,upRight=!1,downLeft=!1,downBranch=!1,downRight=!1,seed,y,ySpeed;